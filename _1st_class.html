<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Mood-Based Playlist ‚Äî Ultra UI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* ===== Animated Aurora Gradient Background ===== */
    :root { --h: 280deg; }
    body {
      background: radial-gradient(1200px 600px at 10% 10%, rgba(99,102,241,.25), transparent 60%),
                  radial-gradient(1000px 500px at 90% 20%, rgba(16,185,129,.2), transparent 60%),
                  radial-gradient(900px 600px at 40% 90%, rgba(244,114,182,.18), transparent 60%),
                  linear-gradient(120deg, hsl(240 20% 8%), hsl(260 20% 8%));
      overflow-x: hidden;
    }
    .aurora::before, .aurora::after {
      content:"";
      position: absolute; inset: -40vh -20vw;
      background: conic-gradient(from 180deg at 50% 50%, 
        hsla(260,100%,70%,.12), hsla(190,100%,70%,.10), hsla(330,100%,70%,.12), hsla(260,100%,70%,.12));
      filter: blur(70px) saturate(180%);
      animation: swirl 18s linear infinite;
      mix-blend-mode: screen; pointer-events:none;
    }
    .aurora::after { animation-direction: reverse; animation-duration: 26s; opacity:.8; }

    @keyframes swirl {
      0%   { transform: translate3d(-2%, -2%, 0) rotate(0deg) scale(1.05); }
      50%  { transform: translate3d(2%, 1%, 0) rotate(180deg) scale(1.08); }
      100% { transform: translate3d(-2%, -2%, 0) rotate(360deg) scale(1.05); }
    }

    /* ===== Floating Particles ===== */
    .spark {
      position:absolute; width:6px; height:6px; border-radius:9999px;
      background: rgba(255,255,255,.15); box-shadow:0 0 10px rgba(255,255,255,.35);
      animation: floatUp linear infinite;
    }
    @keyframes floatUp {
      from { transform: translateY(20vh) translateX(var(--x)) scale(.8); opacity: .0; }
      20%  { opacity: .6; }
      to   { transform: translateY(-120vh) translateX(calc(var(--x) * 1.2)) scale(1.05); opacity: 0; }
    }

    /* ===== Nice utilities ===== */
    .glass { backdrop-filter: blur(14px); background: rgba(17,24,39,.55); }
    .shine { background-image: linear-gradient(120deg, transparent 0%, rgba(255,255,255,.12) 50%, transparent 100%); background-size: 220% 100%; }
    .shine:hover { background-position: right; transition: background-position .9s cubic-bezier(.2,.8,.2,1); }
    .pop { transform: translateY(2px) scale(.995); transition: transform .2s; }
    .pop:hover { transform: translateY(-2px) scale(1.005); }

    /* ===== Upload Dropzone glow ===== */
    .glow {
      box-shadow:
        0 0 0 1px rgba(148,163,184,.25) inset,
        0 8px 30px rgba(0,0,0,.35),
        0 0 40px rgba(99,102,241,.25),
        0 0 80px rgba(16,185,129,.15);
      transition: box-shadow .35s ease;
    }
    .glow:hover { box-shadow:
        0 0 0 1px rgba(148,163,184,.35) inset,
        0 10px 36px rgba(0,0,0,.45),
        0 0 60px rgba(99,102,241,.35),
        0 0 120px rgba(16,185,129,.22);
    }

    /* ===== Reveal animation ===== */
    .reveal { opacity: 0; transform: translateY(8px) scale(.98); animation: in .55s .06s both cubic-bezier(.2,.8,.2,1); }
    @keyframes in { to { opacity:1; transform: translateY(0) scale(1); } }

    /* ===== Responsive video aspect ===== */
    .aspect-video { position: relative; padding-top: 56.25%; }
    .aspect-video > iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; border-radius: 16px; }
  </style>
</head>
<body class="text-slate-100 selection:bg-indigo-500/40">
  <!-- Decorative layers -->
  <div class="aurora fixed inset-0 -z-10"></div>
  <div id="sparks" class="pointer-events-none fixed inset-0 -z-10"></div>

  <main class="max-w-6xl mx-auto px-6 py-10 md:py-14">
    <!-- Header -->
    <header class="mb-8 md:mb-12">
      <h1 class="text-3xl md:text-5xl font-extrabold tracking-tight leading-tight">
        Mood-Based <span class="text-indigo-400">Playlist</span> <span class="text-emerald-300">Generator</span> üéß
      </h1>
      <p class="mt-3 md:text-lg text-slate-300/90">
        Upload a selfie ‚Üí we (magically) detect your mood ‚Üí enjoy a curated set of songs with <span class="underline decoration-indigo-400/60">names + videos</span>.
      </p>
    </header>

    <!-- Card -->
    <section class="glass rounded-3xl p-5 md:p-7 border border-slate-700/70 shadow-2xl pop">
      <div class="grid md:grid-cols-2 gap-6 md:gap-8">
        <!-- Left: Upload + Controls -->
        <div>
          <div class="mb-4">
            <label for="file" class="block text-sm font-semibold uppercase tracking-wide text-slate-300">Upload Photo</label>
          </div>

          <label for="file" class="glow shine rounded-2xl border border-slate-600/60 bg-slate-900/40 p-5 flex items-center gap-4 cursor-pointer">
            <div class="w-16 h-16 rounded-2xl bg-slate-800/70 border border-slate-600/60 flex items-center justify-center overflow-hidden">
              <img id="preview" class="hidden w-full h-full object-cover" alt="preview"/>
              <svg id="cameraIcon" xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-slate-300/80" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M3 8l1.7-2.55A2 2 0 016.37 4h3.26a2 2 0 011.63.84L13 7h3a2 2 0 012 2v7a2 2 0 01-2 2H6a3 3 0 01-3-3V8z"/>
                <circle cx="12" cy="13" r="3.2" stroke-width="2"></circle>
              </svg>
            </div>
            <div>
              <div class="text-slate-100 font-semibold">Drag & drop or click to select</div>
              <div class="text-slate-400 text-sm">PNG, JPG, JPEG ‚Ä¢ up to ~5MB</div>
            </div>
            <input id="file" type="file" accept="image/*" class="hidden">
          </label>

          <div class="mt-5 flex items-center gap-3">
            <button id="detectBtn"
              class="shine px-5 py-2.5 rounded-xl font-semibold bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed">
              Detect Mood
            </button>
            <div id="status" class="text-sm text-slate-300"></div>
          </div>

          <div id="moodChip" class="hidden mt-4 inline-flex items-center gap-2 rounded-full border border-slate-600/70 bg-slate-900/50 px-3 py-1.5">
            <span id="moodDot" class="w-2.5 h-2.5 rounded-full bg-slate-300"></span>
            <span class="text-sm">Mood: <span id="moodText" class="font-semibold">‚Äî</span></span>
          </div>

          <p class="mt-4 text-xs text-slate-400">
            Tip: When your backend is ready, replace the mock detector with a real <code>/api/detect-mood</code> call.
          </p>
        </div>

        <!-- Right: Preview frame -->
        <div class="rounded-2xl border border-slate-700/70 bg-slate-900/40 p-3">
          <div class="aspect-square rounded-xl border border-slate-700/60 bg-slate-800/50 flex items-center justify-center overflow-hidden">
            <img id="previewLarge" class="hidden w-full h-full object-cover" alt="large preview"/>
            <div id="placeholder" class="text-slate-400 text-sm flex flex-col items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 opacity-70" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 5a7 7 0 016.938 6.09A5 5 0 0117 21H7a5 5 0 01-1.938-9.91A7 7 0 0112 5z"/>
              </svg>
              <span>Preview will appear here</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Playlist Section -->
      <div id="playlistWrap" class="hidden reveal mt-8">
        <div class="mb-3">
          <h2 class="text-xl md:text-2xl font-bold">Your Playlist</h2>
          <p id="playlistNote" class="text-slate-300/90 text-sm md:text-base">Generated based on your detected mood.</p>
        </div>

        <!-- Song Names -->
        <div id="songChips" class="flex flex-wrap gap-2 mb-5"></div>

        <!-- Videos Grid -->
        <div id="videoGrid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>

        <!-- Alt Links -->
        <div id="altLinks" class="mt-4 flex flex-wrap gap-3"></div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="mt-10 text-center text-xs text-slate-400">
      Built with ‚ù§Ô∏è ‚Äî animations, glass, aurora, & good vibes.
    </footer>
  </main>

  <script>
    // ===== Floating particles generation =====
    const sparks = document.getElementById('sparks');
    for (let i = 0; i < 36; i++) {
      const s = document.createElement('span');
      s.className = 'spark';
      const left = Math.random() * 100;
      const delay = Math.random() * 12;
      const dur = 10 + Math.random() * 16;
      s.style.left = left + 'vw';
      s.style.bottom = (-10 + Math.random()*20) + 'vh';
      s.style.setProperty('--x', (Math.random() * 40 - 20) + 'px');
      s.style.animationDuration = dur + 's';
      s.style.animationDelay = delay + 's';
      sparks.appendChild(s);
    }

    // ===== Mood ‚Üí songs + videos map =====
    const MOODS = {
      happy: {
        color: 'bg-emerald-400',
        songs: [
          "Happy ‚Äî Pharrell Williams",
          "Can‚Äôt Stop The Feeling ‚Äî Justin Timberlake",
          "Good Time ‚Äî Owl City & Carly Rae Jepsen",
          "Uptown Funk ‚Äî Mark Ronson ft. Bruno Mars",
          "Levitating ‚Äî Dua Lipa"
        ],
        videos: ["ZbZSe6N_BXs","fLexgOxsZu0","H7HmzwI67ec"]
      },
      sad: {
        color: 'bg-sky-400',
        songs: [
          "Someone Like You ‚Äî Adele",
          "Fix You ‚Äî Coldplay",
          "Let Her Go ‚Äî Passenger",
          "Jeene Bhi De ‚Äî Arijit Singh",
          "Phir Le Aaya Dil ‚Äî Arijit Singh"
        ],
        videos: ["hLQl3WQQoQ0","k4V3Mo61fJM","RBumgq5yVrA"]
      },
      angry: {
        color: 'bg-rose-400',
        songs: [
          "In The End ‚Äî Linkin Park",
          "Believer ‚Äî Imagine Dragons",
          "Warriors ‚Äî Imagine Dragons",
          "Lose Yourself ‚Äî Eminem",
          "Remember The Name ‚Äî Fort Minor"
        ],
        videos: ["eVTXPUF4Oz4","7wtfhZwyrcc","y2Wz_P9lJYU"]
      },
      neutral: {
        color: 'bg-slate-300',
        songs: [
          "Paradise ‚Äî Coldplay",
          "Sunflower ‚Äî Post Malone, Swae Lee",
          "Something Just Like This ‚Äî The Chainsmokers & Coldplay",
          "We Don‚Äôt Talk Anymore ‚Äî Charlie Puth",
          "Perfect ‚Äî Ed Sheeran"
        ],
        videos: ["1G4isv_Fylg","ApXoWvfEYVU","FM7MFYoylVs"]
      },
      surprised: {
        color: 'bg-amber-300',
        songs: [
          "Thunder ‚Äî Imagine Dragons",
          "On Top Of The World ‚Äî Imagine Dragons",
          "The Nights ‚Äî Avicii",
          "Dynamite ‚Äî BTS",
          "Shape of You ‚Äî Ed Sheeran"
        ],
        videos: ["fKopy74weus","w5tWYmIOWGk","UtF6Jej8yb4"]
      },
      fearful: {
        color: 'bg-violet-400',
        songs: [
          "Lose It All ‚Äî R3HAB & Skye",
          "Lovely ‚Äî Billie Eilish, Khalid",
          "Memories ‚Äî Maroon 5",
          "Ocean Eyes ‚Äî Billie Eilish",
          "Let Me Down Slowly ‚Äî Alec Benjamin"
        ],
        videos: ["V5bYDhZBFLA","V1Pl8CzNzCw","SlPhMPnQ58k"]
      }
    };

    const file = document.getElementById('file');
    const preview = document.getElementById('preview');
    const previewLarge = document.getElementById('previewLarge');
    const cameraIcon = document.getElementById('cameraIcon');
    const placeholder = document.getElementById('placeholder');
    const detectBtn = document.getElementById('detectBtn');
    const statusEl = document.getElementById('status');
    const moodChip = document.getElementById('moodChip');
    const moodDot = document.getElementById('moodDot');
    const moodText = document.getElementById('moodText');
    const playlistWrap = document.getElementById('playlistWrap');
    const videoGrid = document.getElementById('videoGrid');
    const songChips = document.getElementById('songChips');
    const altLinks = document.getElementById('altLinks');
    const playlistNote = document.getElementById('playlistNote');

    file.addEventListener('change', () => {
      const f = file.files?.[0];
      if (!f) return;
      const url = URL.createObjectURL(f);
      preview.src = url; preview.classList.remove('hidden');
      previewLarge.src = url; previewLarge.classList.remove('hidden');
      cameraIcon.classList.add('hidden');
      placeholder.classList.add('hidden');
    });

    detectBtn.addEventListener('click', async () => {
      const f = file.files?.[0];
      if (!f) { statusEl.textContent = "Please select an image."; return; }

      statusEl.textContent = "Detecting mood‚Ä¶ ‚ú®";
      detectBtn.disabled = true;

      try {
        // ===== MOCK: random mood after a tiny delay =====
        await new Promise(r => setTimeout(r, 900));
        const keys = Object.keys(MOODS);
        const mood = keys[Math.floor(Math.random() * keys.length)];

        // ===== REAL BACKEND (later):
        // const form = new FormData(); form.append("image", f);
        // const res = await fetch("/api/detect-mood", { method: "POST", body: form });
        // const { mood } = await res.json();

        renderResult(mood);
        statusEl.textContent = "Done ‚úî";
      } catch (e) {
        console.error(e);
        statusEl.textContent = "Error: unable to detect mood.";
      } finally {
        detectBtn.disabled = false;
      }
    });

    function renderResult(mood) {
      const data = MOODS[mood] || MOODS.neutral;

      // Mood chip
      moodChip.classList.remove('hidden');
      moodDot.className = `w-2.5 h-2.5 rounded-full ${data.color}`;
      moodText.textContent = capitalize(mood);

      // Song names as pretty chips
      songChips.innerHTML = "";
      data.songs.forEach((name, i) => {
        const chip = document.createElement('div');
        chip.className = "reveal px-3 py-1.5 rounded-full text-sm border border-slate-600/60 bg-slate-800/60 hover:bg-slate-800/80 transition";
        chip.style.animationDelay = `${0.02 * i}s`;
        chip.textContent = name;
        songChips.appendChild(chip);
      });

      // Video embeds
      videoGrid.innerHTML = "";
      data.videos.forEach((id, i) => {
        const card = document.createElement('div');
        card.className = "reveal rounded-2xl border border-slate-700/70 bg-slate-900/40 p-2";
        card.style.animationDelay = `${0.03 * i + 0.05}s`;
        card.innerHTML = `
          <div class="aspect-video overflow-hidden">
            <iframe src="https://www.youtube-nocookie.com/embed/${id}" 
              title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; 
              encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
          </div>`;
        videoGrid.appendChild(card);
      });

      // Alt links (Spotify mood mixes)
      altLinks.innerHTML = "";
      const links = {
        happy: "https://open.spotify.com/playlist/37i9dQZF1DXdPec7aLTmlC",
        sad: "https://open.spotify.com/playlist/37i9dQZF1DX7qK8ma5wgG1",
        angry: "https://open.spotify.com/playlist/37i9dQZF1DWTtTyjgd08yp",
        neutral: "https://open.spotify.com/playlist/37i9dQZF1DX4WYpdgoIcn6",
        surprised: "https://open.spotify.com/playlist/37i9dQZF1DX1g0iEXLFycr",
        fearful: "https://open.spotify.com/playlist/37i9dQZF1DXcCnTAt8CfNe"
      };
      const a = document.createElement('a');
      a.href = links[mood] || links.neutral;
      a.target = "_blank"; a.rel = "noopener";
      a.className = "reveal inline-flex items-center gap-2 text-sm underline decoration-indigo-400/60 hover:no-underline";
      a.style.animationDelay = ".12s";
      a.innerHTML = `
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5M21 3l-9 9M15 3h6v6"/>
        </svg>
        Open on Spotify ‚Äî ${capitalize(mood)} Mix
      `;
      altLinks.appendChild(a);

      playlistNote.textContent = `Generated for mood: ${capitalize(mood)}.`;
      playlistWrap.classList.remove('hidden');
      playlistWrap.classList.add('reveal');
    }

    function capitalize(s){ return s.charAt(0).toUpperCase() + s.slice(1); }
  </script>
</body>
</html>
